import requests

NEWS_API_KEY = 'SUA API KEY'

def obter_noticias_cripto():
    print("üì∞ Buscando √∫ltimas not√≠cias de criptomoedas...")

    url = (
        f'https://newsapi.org/v2/everything?'
        f'q=cryptocurrency OR bitcoin OR ethereum&'
        f'sortBy=publishedAt&'
        f'language=pt&'
        f'apiKey={NEWS_API_KEY}'
    )

    try:
        response = requests.get(url, timeout=10)
        response.raise_for_status()
        data = response.json()

        if data.get('status') == 'error':
            print("\n‚ùå ERRO DA API:")
            print(f"   C√≥digo: {data.get('code')}")
            print(f"   Mensagem: {data.get('message')}")
            return

        artigos = data.get('articles', [])[:5]

        if not artigos:
            print("\nNenhuma not√≠cia encontrada no momento com os crit√©rios definidos.")
            return

        print("\n" + "=" * 40)
        print("=== üöÄ √öltimas Not√≠cias sobre Criptomoedas ===")
        print("=" * 40)

        for i, artigo in enumerate(artigos, start=1):
            titulo = artigo.get('title', 'T√≠tulo n√£o dispon√≠vel')
            fonte = artigo.get('source', {}).get('name', 'Fonte Desconhecida')
            link = artigo.get('url', '#')

            print(f"{i}. **{titulo}**")
            print(f"   Fonte: {fonte}")
            print(f"   Link: {link}\n")

        print("=" * 40)

    except requests.exceptions.RequestException as e:
        print(f"\n‚ùå Erro de Conex√£o: Verifique sua internet ou a URL base da API. Detalhes: {e}")
    except Exception as e:
        print(f"\n‚ùå Erro Inesperado ao obter not√≠cias: {e}")


if __name__ == "__main__":
    obter_noticias_cripto()
